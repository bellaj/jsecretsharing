package org.jsecretsharing.tests;

import static org.junit.Assert.*;

import java.util.ArrayList;
import java.util.List;

import org.jsecretsharing.Share;
import org.jsecretsharing.ShareCombiner;
import org.junit.Test;
import org.junit.experimental.runners.Enclosed;
import org.junit.runner.RunWith;

@RunWith(Enclosed.class)
public class ShareCombinerTest {
	public static class Combining_Shares {
		private final String[] shareData = new String[] {
			"01:14141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"41414141414141414141414141414141414141414141414141414141414141414141414141414141" +
			"414141414141414141414145d3475813456758881758242346779867d838987808d",
			"02:28282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"82828282828282828282828282828282828282828282828282828282828282828282828282828282" +
			"8282828282828282828282871488995486a899c95899656487b8d9a91979d9b94a1",
			"03:3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3" +
			"c3c3c3c3c3c3c3c3c3c3c3c855c9da95c7e9db0a99daa6a5c8fa1aea5abb1afa8b5"
		};
		
		@Test
		public void itProducesTheOriginalSecret() throws Exception {
			List<Share> shares = new ArrayList<Share>();
			for (String share : shareData) {
				shares.add(Share.load(share));
			}
			ShareCombiner combiner = new ShareCombiner(shares);
			assertEquals("I am Batman. Seriously", new String(combiner.combine()));
		}
	}
}
